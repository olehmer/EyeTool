(function(t){function e(e){for(var s,o,c=e[0],r=e[1],l=e[2],h=0,u=[];h<c.length;h++)o=c[h],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&u.push(n[o][0]),n[o]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);d&&d(e);while(u.length)u.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],s=!0,c=1;c<i.length;c++){var r=i[c];0!==n[r]&&(s=!1)}s&&(a.splice(e--,1),t=o(o.s=i[0]))}return t}var s={},n={app:0},a=[];function o(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=s,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(i,s,function(e){return t[e]}.bind(null,s));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var d=r;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";i("85ec")},"1e96":function(t,e,i){},"25ea":function(t,e,i){},"36a6":function(t,e,i){},"3e65":function(t,e,i){"use strict";i("25ea")},"541b":function(t,e,i){"use strict";i("36a6")},5561:function(t,e,i){"use strict";i("d015")},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var s=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("Home")],1)},a=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[t.calibrating?t._e():i("div",{staticClass:"home"},[i("h3",[t._v("Data")]),i("div",{staticClass:"button top-left",on:{click:function(e){t.calibrating=!0}}},[t._v(" "+t._s(t.calibrated?"Recalibrate":"Calibrate")+" ")]),t.calibrated?t._e():i("div",{staticClass:"needs-cal"},[i("p",[t._v('You must calibrate this device before you can make measurements. Use the "Calibrate" button in the top left corner of the screen. The calibration will be stored locally (via cookies) on your device for future use. You can recalibrate at any time using the same button. ')])]),t.calibrated?i("div",{staticClass:"data-holder"},[i("div",{staticClass:"button",on:{click:t.addDataEntry}},[t._v("Add Data Entry")]),i("div",{staticClass:"table-holder"},t._l(t.dataReversed,(function(e,s){return i("div",{key:s,staticClass:"table-row",class:{odd:(s+1)%2},on:{click:function(e){return t.showDataDetails(t.data.length-1-s)}}},[i("p",[t._v(t._s(e.name))])])})),0)]):t._e(),i("div",{staticClass:"button top-right",on:{click:t.downloadData}},[t._v("Download Data")])]),t.calibrating?i("Calibrate",{attrs:{ppiIn:t.ppi,colorsIn:t.colors,sizeIn:t.size,distIn:t.dist},on:{setPPI:function(e){t.ppi=e},setColors:function(e){t.colors=e},setSize:function(e){t.size=e},setDistance:function(e){t.dist=e},calibrationDone:function(e){return t.calibrationEnded()}}}):t._e(),t.dataDetails?i("DataDetails",{staticClass:"data-details-container",attrs:{dataIn:t.currentData,ppi:t.ppi,size:t.size,colors:t.colors,dist:t.dist},on:{deleteEntry:t.deleteCurrentEntry,closeDetailView:function(e){t.dataDetails=!1}}}):t._e()],1)},c=[],r=(i("a434"),i("b0c0"),i("ac1f"),i("843c"),i("1276"),i("2909")),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content-view"},[i("h3",[t._v("Calibration (step "+t._s(t.view)+" of 3)")]),t.view>1?i("div",{staticClass:"button top-left",on:{click:function(e){t.view--}}},[t._v("Back")]):t._e(),t.canContinue()?i("div",{staticClass:"button top-right",on:{click:function(e){t.view<3?t.view++:t.calibrationDone()}}},[t._v(" "+t._s(3==t.view?"Done":"Next")+" ")]):t._e(),1==t.view?i("PPI",{attrs:{ppiIn:t.ppiIn},on:{setPPI:function(e){return t.updatePPI(e)}}}):t._e(),2==t.view?i("Colors",{attrs:{colorsIn:t.colors,sizeIn:t.size},on:{setColors:function(e){return t.updateColors(e)},setSize:function(e){return t.updateSize(e)}}}):t._e(),3==t.view?i("Distance",{attrs:{distIn:t.dist},on:{setDistance:function(e){return t.updateDist(e)}}}):t._e()],1)},d=[],h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("h3",[t._v("Set the Screen Pixel Density")]),i("h3",{staticClass:"selector",class:{active:0==t.method},on:{click:function(e){return t.setMethod(0)}}},[t._v("Enter PPI")]),i("h3",{staticClass:"selector",class:{active:1==t.method},on:{click:function(e){return t.setMethod(1)}}},[t._v("Manually Measure")]),i("canvas",{attrs:{id:"canvas_ppi"}},[t._v(" Your browser doesn't support HTML canvas. Please upgrade to a newer browser. ")]),0==t.method?i("div",{staticClass:"method"},[i("p",[t._v("The pixels per inch (PPI) of the screen is:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.ppi,expression:"ppi"}],attrs:{placeholder:"pixels per inch"},domProps:{value:t.ppi},on:{input:[function(e){e.target.composing||(t.ppi=e.target.value)},t.updateWidth]}}),i("span",{staticStyle:{"padding-left":"10px"}},[t._v("PPI.")]),i("p",[t._v('If the PPI is correct, the red line above should measure exactly 25.4 mm (1 inch) in width. Note that mobile phones may require you to enter the dots per inch (DPI) instead of PPI. A common PPI for 1080p computer screens is 96. If you\'re unsure, click "Manually Measure" above to manually calibrate.')])]):t._e(),1==t.method?i("div",{staticClass:"method"},[i("p",[t._v("Using a ruler, the green line above is: ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.line_width,expression:"line_width"}],attrs:{placeholder:"line width in mm"},domProps:{value:t.line_width},on:{input:[function(e){e.target.composing||(t.line_width=e.target.value)},t.updatePPI]}}),i("span",{staticStyle:{"padding-left":"10px"}},[t._v("millimeters wide.")]),i("p",[t._v("From your measurement, the PPI/DPI of your screen is: "+t._s(t.ppi))])]):t._e()])},u=[],p={props:["ppiIn"],data:function(){return{canvas:null,ctx:null,ppi:null,ppi_default:96,line_width:null,method:0}},mounted:function(){this.ppi=this.ppiIn,this.setupCanvas(),this.init()},methods:{setMethod:function(t){this.method=t,this.setupCanvas(),this.init()},setupCanvas:function(){this.canvas=document.getElementById("canvas_ppi"),window.onresize=this.init,this.ctx=this.canvas.getContext("2d")},init:function(){this.ctx.canvas.width=window.innerWidth,this.ctx.canvas.height=20;var t=1==this.method?"green":"red",e=0;e=null===this.ppi||1==this.method?this.ppi_default:parseInt(this.ppi);var i={};i.x=this.ctx.canvas.width/2-e/2,i.y=this.ctx.canvas.height/2,this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.beginPath(),this.ctx.moveTo(i.x,i.y),this.ctx.lineTo(i.x+e,i.y),this.ctx.strokeStyle=t,this.ctx.lineWidth=5,this.ctx.stroke()},updateWidth:function(){this.init(),this.$emit("setPPI",this.ppi)},updatePPI:function(){this.line_width>0?this.ppi=Math.round(this.ppi_default/this.line_width*25.4):this.ppi=null,this.$emit("setPPI",this.ppi)}}},v=p,f=(i("3e65"),i("2877")),m=Object(f["a"])(v,h,u,!1,null,"2097905a",null),_=m.exports,b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("h3",[t._v("Adjust Colors and Size for Your Glasses and Screen")]),i("canvas",{attrs:{id:"canvas_color"}},[t._v(" Your browser doesn't support HTML canvas. Please upgrade to a newer browser. ")]),i("div",[i("div",{staticClass:"slide-cont"},[i("p",[t._v("Set the size of the circles:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.size,expression:"size"}],attrs:{type:"range",min:"10",max:"200"},domProps:{value:t.size},on:{input:function(e){return t.drawCircles()},__r:function(e){t.size=e.target.value}}})])]),t._l(t.colors,(function(e,s){return i("div",{key:s,staticClass:"slide-cont"},[i("h3",[t._v(t._s(0==s?"Green":"Red")+" Circle RGB")]),t._l(3,(function(s){return i("div",{key:s},[i("p",[t._v(t._s(t.colorNames[s-1])+" Component:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e[s-1],expression:"color[j-1]"}],staticClass:"slider",attrs:{type:"range",min:"0",max:"255"},domProps:{value:e[s-1]},on:{input:function(e){return t.drawCircles()},__r:function(i){return t.$set(e,s-1,i.target.value)}}})])}))],2)}))],2)},g=[],w=(i("99af"),i("cb29"),{props:["colorsIn","sizeIn"],data:function(){return{canvas:null,ctx:null,colors:[[0,128,0],[128,0,0]],colorNames:["Red","Green","Blue"],size:105}},mounted:function(){this.colors=this.colorsIn,null!==this.sizeIn&&(this.size=this.sizeIn),this.setupCanvas()},methods:{setupCanvas:function(){window.onresize=this.setupCanvas,this.canvas=document.getElementById("canvas_color"),this.ctx=this.canvas.getContext("2d");var t=window.innerWidth-20;t>500&&(t=window.innerWidth/2),this.ctx.canvas.width=t,this.ctx.canvas.height=.625*t,this.ctx.globalCompositeOperation="lighter",this.drawCircles()},drawCircles:function(){var t=this.ctx.canvas.width,e=this.ctx.canvas.height;this.ctx.clearRect(0,0,t,e),this.ctx.beginPath(),this.ctx.arc(t/2,e/2,this.size,0,2*Math.PI),this.ctx.moveTo(t/2-this.size,e/2),this.ctx.lineTo(t/2-this.size,e/2),this.ctx.strokeStyle="rgb(".concat(this.colors[0][0],", \n                                  ").concat(this.colors[0][1],", \n                                  ").concat(this.colors[0][2],")"),this.ctx.lineWidth=this.size/2,this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(t/2,e/2,this.size/2,0,2*Math.PI),this.ctx.fillStyle="rgb(".concat(this.colors[1][0],", \n                                ").concat(this.colors[1][1],", \n                                ").concat(this.colors[1][2],")"),this.ctx.fill(),this.$emit("setColors",this.colors),this.$emit("setSize",this.size)}}}),x=w,C=(i("dea8"),Object(f["a"])(x,b,g,!1,null,"cd7aa5b4",null)),y=C.exports,D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("h3",[t._v("Configure the Viewing Distance")]),i("div",{staticClass:"text-holder"},[i("p",[t._v("In meters, the distance between the patient and the screen is:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.dist,expression:"dist"}],attrs:{placeholder:"distance"},domProps:{value:t.dist},on:{input:[function(e){e.target.composing||(t.dist=e.target.value)},t.updateDistance]}})])])},I=[],P={props:["distIn"],data:function(){return{dist:null}},mounted:function(){this.dist=this.distIn},methods:{updateDistance:function(){this.$emit("setDistance",this.dist)}}},z=P,k=(i("541b"),Object(f["a"])(z,D,I,!1,null,"033a5c46",null)),M=k.exports,A={components:{PPI:_,Colors:y,Distance:M},props:["ppiIn","sizeIn","colorsIn","distIn"],data:function(){return{ppi:null,colors:[[0,128,0],[128,0,0]],size:null,dist:null,view:1}},mounted:function(){this.ppi=this.ppiIn,this.size=this.sizeIn,null!==this.colorsIn&&(this.colors=this.colorsIn),this.dist=this.distIn},methods:{canContinue:function(){return 1==this.view&&null!==this.ppi&&this.ppi>0||(2==this.view||3==this.view&&null!==this.dist&&this.dist>0)},updatePPI:function(t){this.ppi=t,this.$emit("setPPI",t),this.ppi>0&&null!==this.ppi?this.canContinue[0]=!0:this.canContinue[0]=!1},updateSize:function(t){this.size=t,this.$emit("setSize",t)},updateColors:function(t){this.colors=t,this.$emit("setColors",t)},updateDist:function(t){this.dist=t,this.$emit("setDistance",t),this.dist>0&&null!==this.dist?this.canContinue[2]=!0:this.canContinue[2]=!1},calibrationDone:function(){this.$emit("calibrationDone")}}},E=A,S=(i("7f4a"),Object(f["a"])(E,l,d,!1,null,null,null)),T=S.exports,$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[t.showTool?t._e():i("div",[i("div",{staticClass:"button top-left",on:{click:function(e){t.confirmDelete=!0}}},[t._v(" Delete Entry ")]),t.dataAll.name&&t.dataAll.name.length>0?i("div",{staticClass:"button top-right",on:{click:t.closeDetailView}},[t._v(" Save ")]):t._e(),i("input",{directives:[{name:"model",rawName:"v-model",value:t.dataAll.name,expression:"dataAll.name"}],staticClass:"text",attrs:{placeholder:"name this dataset"},domProps:{value:t.dataAll.name},on:{input:function(e){e.target.composing||t.$set(t.dataAll,"name",e.target.value)}}}),t.dataAll.name&&t.dataAll.name.length>0?i("div",[i("div",[i("div",{staticClass:"check-holder"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.inverted,expression:"inverted"}],staticClass:"check",attrs:{type:"checkbox",id:"invertbox"},domProps:{checked:Array.isArray(t.inverted)?t._i(t.inverted,null)>-1:t.inverted},on:{change:function(e){var i=t.inverted,s=e.target,n=!!s.checked;if(Array.isArray(i)){var a=null,o=t._i(i,a);s.checked?o<0&&(t.inverted=i.concat([a])):o>-1&&(t.inverted=i.slice(0,o).concat(i.slice(o+1)))}else t.inverted=n}}}),i("label",{attrs:{for:"invertbox"}},[t._v("Invert colors")])]),t.smallScreen?i("div",{staticClass:"check-holder"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.useMobile,expression:"useMobile"}],staticClass:"check",attrs:{type:"checkbox",id:"mobilebox"},domProps:{checked:Array.isArray(t.useMobile)?t._i(t.useMobile,null)>-1:t.useMobile},on:{change:function(e){var i=t.useMobile,s=e.target,n=!!s.checked;if(Array.isArray(i)){var a=null,o=t._i(i,a);s.checked?o<0&&(t.useMobile=i.concat([a])):o>-1&&(t.useMobile=i.slice(0,o).concat(i.slice(o+1)))}else t.useMobile=n}}}),i("label",{attrs:{for:"mobilebox"}},[t._v("Use Mobile Mode")])]):t._e()]),t.useMobile?i("p",[t._v(" Click a square below to launch the tool for that position. ")]):t._e(),t.useMobile?t._e():i("p",[t._v(" Click the grid below to launch the tool for all positions. ")]),void 0!==t.dataAll.data?i("div",{staticClass:"data-container"},[i("div",{class:{clickable:!t.useMobile},staticStyle:{display:"inline-block"},on:{click:function(e){return t.launchTool()}}},t._l(3,(function(e){return i("div",{key:e,staticClass:"data-row"},t._l(3,(function(s){return i("div",{key:s,staticClass:"data-entry",class:{clickable:t.useMobile},on:{click:function(i){return t.launchTool(e-1,s-1)}}},[i("p",{staticClass:"corner-label"},[t._v(t._s(e)+","+t._s(s))]),i("div",{staticClass:"show-data-values"},[i("p",{staticClass:"data"},[t._v(" V: "+t._s(t.dataAll.data[e-1][s-1]?t.dataAll.data[e-1][s-1].v:"")+" ")]),i("p",{staticClass:"data"},[t._v(" H: "+t._s(t.dataAll.data[e-1][s-1]?t.dataAll.data[e-1][s-1].h:"")+" ")]),i("p",{staticClass:"data"},[t._v(" PD: "+t._s(t.dataAll.data[e-1][s-1]?t.dataAll.data[e-1][s-1].pd:"")+" ")])])])})),0)})),0)]):t._e(),i("p",{staticClass:"data"},[t._v("V is the measured vertical offset in millimeters.")]),i("p",{staticClass:"data"},[t._v("H is the measured horizontal offset in millimeters.")]),i("p",{staticClass:"data"},[t._v("PD is the measured offset in prism dioptres.")]),t.confirmDelete?i("div",{staticClass:"confirm-delete-container"}):t._e(),t.confirmDelete?i("div",{staticClass:"confirm-popup"},[i("h3",[t._v("Confirm Delete")]),i("p",[t._v("Are you sure you want to delete this entry and all its data? This can't be undone.")]),i("div",{staticClass:"button delete-buttons cancel",on:{click:function(e){t.confirmDelete=!1}}},[t._v(" Cancel ")]),i("div",{staticClass:"button delete-buttons yes",on:{click:t.deleteEntry}},[t._v(" Yes ")])]):t._e()]):i("div",[i("p",[t._v("You must name this dataset before you can make measurements.")])])]),t._v(" "),t.showTool&&t.useMobile?i("Tool",{attrs:{ppi:t.ppi,size:t.size,colors:t.colors,dist:t.dist,ind:t.ind,data:t.dataAll,invert:t.inverted}}):t._e(),void 0!==t.dataAll.data&&t.showTool&&!t.useMobile?i("div",{staticClass:"tool-container"},t._l(3,(function(e){return i("div",{key:e,staticClass:"tool-row"},t._l(3,(function(s){return i("div",{key:s,staticClass:"tool-entry"},[i("Tool",{attrs:{ppi:t.ppi,size:t.size,colors:t.colors,dist:t.dist,ind:{row:e-1,col:s-1},data:t.dataAll,invert:t.inverted}})],1)})),0)})),0):t._e(),t.showTool?i("div",{staticClass:"button top-right",on:{click:function(e){t.showTool=!1}}},[t._v(" Done ")]):t._e()],1)},O=[],j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"cont_"+t.ind.row+"_"+t.ind.col,staticClass:"container"},[i("canvas",{ref:"canvas_"+t.ind.row+"_"+t.ind.col,attrs:{id:"canvas"}},[t._v(" Your browser doesn't support HTML canvas. Please upgrade to a newer browser. ")]),i("div",{staticClass:"footer"},[i("span",{staticClass:"footer"},[t._v(" H="+t._s(t.h_offset)+" [mm] ")]),i("span",{staticClass:"footer"},[t._v(" V="+t._s(t.v_offset)+" [mm] ")]),i("span",{staticClass:"footer"},[t._v(" PD="+t._s(t.pd)+" [Î”] ")])]),i("div",{staticClass:"header"},[i("span",[t._v(" "+t._s(t.ind.row+1)+","+t._s(t.ind.col+1)+" ")])])])},Y=[],N={props:["ind","ppi","colors","size","dist","data","invert"],data:function(){return{canvas:null,ctx:null,CLICK_DIST:0,red:{},green:{},startX:0,startY:0,v_offset:0,h_offset:0,pd:0,dragging:!1,dragged:!1,preset:!1,gc:0,rc:1}},mounted:function(){if(void 0===this.data.data[this.ind.row][this.ind.col].x){var t={v:0,h:0,x:0};this.data.data[this.ind.row][this.ind.col]=t}else this.green.x=this.data.data[this.ind.row][this.ind.col].x,this.green.y=this.data.data[this.ind.row][this.ind.col].y,this.preset=!0;this.invert&&(this.gc=1,this.rc=0),this.setupCanvas(),this.init()},methods:{setupCanvas:function(){var t="canvas_"+this.ind.row+"_"+this.ind.col;this.canvas=this.$refs[t],this.canvas.onmousedown=this.mouseDown,this.canvas.onmousemove=this.mouseMove,this.canvas.onmouseup=this.mouseUp,this.canvas.onmouseout=this.mouseUp,this.canvas.ontouchstart=this.touchDown,this.canvas.ontouchmove=this.touchMove,this.canvas.ontouchend=this.mouseUp,this.canvas.ontouchcancel=this.mouseUp,window.onresize=this.init,this.ctx=this.canvas.getContext("2d")},init:function(){this.resizeCanvas(),this.red.x=this.ctx.canvas.width/2,this.red.y=this.ctx.canvas.height/2,this.preset||(this.green.x=this.ctx.canvas.width/2,this.green.y=this.ctx.canvas.height/2),this.updateData(),this.ctx.globalCompositeOperation="lighter",this.drawCircles()},resizeCanvas:function(){var t="cont_"+this.ind.row+"_"+this.ind.col,e=this.$refs[t];void 0!==e&&(this.ctx.canvas.width=e.clientWidth,this.ctx.canvas.height=e.clientHeight,this.CLICK_DIST=.001*(this.ctx.canvas.width+this.ctx.canvas.height)/2)},drawCircles:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.beginPath(),this.ctx.arc(this.green.x,this.green.y,this.size,0,2*Math.PI),this.ctx.moveTo(this.green.x-this.size,this.green.y),this.ctx.lineTo(this.green.x-this.size,this.green.y),this.ctx.strokeStyle="rgb(".concat(this.colors[this.gc][0],", \n                                  ").concat(this.colors[this.gc][1],", \n                                  ").concat(this.colors[this.gc][2],")"),this.ctx.lineWidth=this.size/2,this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(this.red.x,this.red.y,this.size/2,0,2*Math.PI),this.ctx.fillStyle="rgb(".concat(this.colors[this.rc][0],", \n                                ").concat(this.colors[this.rc][1],", \n                                ").concat(this.colors[this.rc][2],")"),this.ctx.fill()},mouseDown:function(t){t.preventDefault(),t.stopPropagation(),this.dragging=!0,this.startX=parseInt(t.clientX),this.startY=parseInt(t.clientY)},touchDown:function(t){t.preventDefault(),t.stopPropagation(),t.touches.length>=1&&(this.dragging=!0),this.startX=parseInt(t.touches[0].clientX),this.startY=parseInt(t.touches[0].clientY)},move:function(t,e){var i=t-this.startX,s=e-this.startY;(Math.abs(i)>0||Math.abs(s)>0)&&(this.dragged=!0),this.startX=t,this.startY=e,this.dragging&&(this.green.x+=i,this.green.y+=s,this.drawCircles(),this.updateData())},mouseMove:function(t){t.preventDefault(),t.stopPropagation();var e=parseInt(t.clientX),i=parseInt(t.clientY);this.move(e,i)},touchMove:function(t){t.preventDefault(),t.stopPropagation();var e=parseInt(t.touches[0].clientX),i=parseInt(t.touches[0].clientY);this.move(e,i)},mouseUp:function(t){t.preventDefault(),t.stopPropagation(),this.dragging=!1,this.dragged=!1},updateData:function(){var t=this.red.y-this.green.y,e=-1*(this.red.x-this.green.x);this.h_offset=Math.round(e/this.ppi*25.4*10)/10,this.v_offset=Math.round(t/this.ppi*25.4*10)/10,this.data.data[this.ind.row][this.ind.col].v=this.v_offset,this.data.data[this.ind.row][this.ind.col].h=this.h_offset,this.pd=Math.round(Math.sqrt(Math.pow(this.h_offset,2)+Math.pow(this.v_offset,2))/this.dist)/10,this.data.data[this.ind.row][this.ind.col].pd=this.pd,this.data.data[this.ind.row][this.ind.col].x=this.green.x,this.data.data[this.ind.row][this.ind.col].y=this.green.y}}},H=N,V=(i("e156"),Object(f["a"])(H,j,Y,!1,null,"ef9ed284",null)),R=V.exports,U={components:{Tool:R},props:["dataIn","ppi","size","colors","dist"],data:function(){return{dataAll:{},confirmDelete:!1,ind:{},showTool:!1,inverted:!1,useMobile:!1,smallScreen:!1,forceDesktop:!1}},mounted:function(){this.dataAll=this.dataIn,window.onresize=this.configureLayout,this.configureLayout()},methods:{configureLayout:function(){window.innerWidth<500?(this.useMobile=!0,this.smallScreen=!0):(this.useMobile=!1,this.smallScreen=!1)},deleteEntry:function(){this.$emit("deleteEntry")},closeDetailView:function(){this.$emit("closeDetailView")},launchTool:function(t,e){this.useMobile&&void 0!==t?(this.ind.row=t,this.ind.col=e,this.showTool=!0):this.useMobile||(this.showTool=!0)}}},W=U,X=(i("7374"),Object(f["a"])(W,$,O,!1,null,"18b39f8a",null)),L=X.exports,B={components:{Calibrate:T,DataDetails:L},data:function(){return{calibrated:!1,calibrating:!1,ppi:null,colors:null,size:null,dist:null,invertColor:!1,data:[],currentIndex:null,currentData:null,dataDetails:!1,cname:"cal"}},mounted:function(){if(document.cookie.length>0){var t=decodeURIComponent(document.cookie),e=JSON.parse(t.split("=")[1]);this.ppi=e.ppi,this.colors=e.colors,this.size=e.size,this.dist=e.dist,this.calibrated=!0}},computed:{dataReversed:function(){return Object(r["a"])(this.data).reverse()}},methods:{calibrationEnded:function(){this.calibrating=!1,null!==this.ppi&&null!==this.colors&&null!==this.size&&null!==this.dist&&(this.calibrated=!0,this.saveCalibration())},addDataEntry:function(){var t={name:"",data:[[{},{},{}],[{},{},{}],[{},{},{}]]};this.data.push(t),this.showDataDetails(this.data.length-1)},showDataDetails:function(t){this.currentIndex=t,this.currentData=this.data[t],this.dataDetails=!0},deleteCurrentEntry:function(){this.data.splice(this.currentIndex,1),this.dataDetails=!1},saveCalibration:function(){var t={};t.ppi=this.ppi,t.colors=this.colors,t.size=this.size,t.dist=this.dist;var e=encodeURIComponent(JSON.stringify(t)),i=new Date;i.setTime(i.getTime()+864e8);var s="expires="+i.toUTCString();document.cookie="cal="+e+";"+s+";samesite=Strict; secure; path=/"},downloadData:function(){var t=new Date,e="Downloaded: "+t+"\n\n";e+="V is the vertical offset in millimeters.\n",e+="H is the horizontal offset in millimeters.\n",e+="PD is the offset in prism dioptres.\n\n",e+="Viewing distance was: "+this.dist+" meters.\n\n";for(var i=this.data,s=0;s<i.length;s++)for(var n=0;n<i[s].data.length;n++)for(var a=0;a<i[s].data[n].length;a++)i[s].data[n][a].v=void 0===i[s].data[n][a].v?"-":i[s].data[n][a].v,i[s].data[n][a].h=void 0===i[s].data[n][a].h?"-":i[s].data[n][a].h,i[s].data[n][a].pd=void 0===i[s].data[n][a].pd?"-":i[s].data[n][a].pd;for(var o=0;o<i.length;o++){e+="Measurement name: "+i[o].name+"\n",e+="".padEnd(49,"-")+"\n";for(var c=0;c<i[o].data.length;c++)e+="|"+("  V: "+i[o].data[c][0].v).padEnd(15)+"|"+("  V: "+i[o].data[c][1].v).padEnd(15)+"|"+("  V: "+i[o].data[c][2].v).padEnd(15)+"|\n",e+="|"+("  H: "+i[o].data[c][0].h).padEnd(15)+"|"+("  H: "+i[o].data[c][1].h).padEnd(15)+"|"+("  H: "+i[o].data[c][2].h).padEnd(15)+"|\n",e+="|"+(" PD: "+i[o].data[c][0].pd).padEnd(15)+"|"+(" PD: "+i[o].data[c][1].pd).padEnd(15)+"|"+(" PD: "+i[o].data[c][2].pd).padEnd(15)+"|\n",e+="".padEnd(49,"-")+"\n";e+="\n\n"}var r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),r.setAttribute("download","data.txt"),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}}},G=B,J=(i("5561"),i("f19d"),Object(f["a"])(G,o,c,!1,null,"3aeb4c11",null)),q=J.exports,K={name:"App",components:{Home:q},data:function(){return{view:1}},mounted:function(){},methods:{}},F=K,Q=(i("034f"),Object(f["a"])(F,n,a,!1,null,null,null)),Z=Q.exports;s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(Z)}}).$mount("#app")},"6f6c":function(t,e,i){},7374:function(t,e,i){"use strict";i("6f6c")},"7f4a":function(t,e,i){"use strict";i("b37c")},"85ec":function(t,e,i){},b37c:function(t,e,i){},d015:function(t,e,i){},d729:function(t,e,i){},dea8:function(t,e,i){"use strict";i("1e96")},e156:function(t,e,i){"use strict";i("e466")},e466:function(t,e,i){},f19d:function(t,e,i){"use strict";i("d729")}});
//# sourceMappingURL=app.dc2bf3b2.js.map